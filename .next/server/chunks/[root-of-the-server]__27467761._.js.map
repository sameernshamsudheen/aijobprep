{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/data/env/server.ts"],"sourcesContent":["import { createEnv } from \"@t3-oss/env-nextjs\";\nimport { z } from \"zod\";\n\nexport const serverEnv = createEnv({\n  server: {\n    CLERK_SECRET_KEY: z.string().min(1),\n    ARCJET_KEY: z.string().min(1),\n    POSTGRES_DB: z.string().min(1),\n    POSTGRES_USER: z.string().min(1),\n    POSTGRES_PASSWORD: z.string().min(1),\n    POSTGRES_PORT: z.string().min(1),\n    POSTGRES_HOST: z.string().min(1),\n    POSTGRES_HOSTNAME: z.string().min(1),\n    HUME_API_KEY: z.string().min(1),\n    HUME_SECRET_KEY: z.string().min(1),\n    GEMINI_API_KEY: z.string().min(1),\n  },\n\n  createFinalSchema:env=>{\n    return z.object(env).transform(val=>{\n      const {POSTGRES_HOST,POSTGRES_DB,POSTGRES_PASSWORD,POSTGRES_PORT,POSTGRES_USER,...rest} =val\n      return{\n        ...rest,\n         DATABSE_URL:`postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}`\n      }\n    })\n  },\n  experimental__runtimeEnv: process.env,\n  emptyStringAsUndefined: true,\n});\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,MAAM,YAAY,IAAA,4KAAS,EAAC;IACjC,QAAQ;QACN,kBAAkB,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QACjC,YAAY,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAC3B,aAAa,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAC5B,eAAe,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAC9B,mBAAmB,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAClC,eAAe,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAC9B,eAAe,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAC9B,mBAAmB,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAClC,cAAc,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAC7B,iBAAiB,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAChC,gBAAgB,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IACjC;IAEA,mBAAkB,CAAA;QAChB,OAAO,yKAAC,CAAC,MAAM,CAAC,KAAK,SAAS,CAAC,CAAA;YAC7B,MAAM,EAAC,aAAa,EAAC,WAAW,EAAC,iBAAiB,EAAC,aAAa,EAAC,aAAa,EAAC,GAAG,MAAK,GAAE;YACzF,OAAM;gBACJ,GAAG,IAAI;gBACN,aAAY,CAAC,WAAW,EAAE,cAAc,CAAC,EAAE,kBAAkB,CAAC,EAAE,cAAc,CAAC,EAAE,cAAc,CAAC,EAAE,aAAa;YAClH;QACF;IACF;IACA,0BAA0B,QAAQ,GAAG;IACrC,wBAAwB;AAC1B","debugId":null}},
    {"offset": {"line": 97, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/drizzle/schema-helpers.ts"],"sourcesContent":["import { timestamp, uuid } from \"drizzle-orm/pg-core\";\nexport const uuidId = {\n  id: uuid(\"id\").defaultRandom().primaryKey(),\n};\nexport const timestamps = {\n  createdAt: timestamp(\"created_at\", { withTimezone: true })\n    .defaultNow()\n    .notNull(),\n  updatedAt: timestamp(\"updated_at\", { withTimezone: true })\n    .defaultNow()\n    .notNull()\n    .$onUpdate(() => new Date()),\n};\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AACO,MAAM,SAAS;IACpB,IAAI,IAAA,yKAAI,EAAC,MAAM,aAAa,GAAG,UAAU;AAC3C;AACO,MAAM,aAAa;IACxB,WAAW,IAAA,mLAAS,EAAC,cAAc;QAAE,cAAc;IAAK,GACrD,UAAU,GACV,OAAO;IACV,WAAW,IAAA,mLAAS,EAAC,cAAc;QAAE,cAAc;IAAK,GACrD,UAAU,GACV,OAAO,GACP,SAAS,CAAC,IAAM,IAAI;AACzB","debugId":null}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/drizzle/schema/interviews.ts"],"sourcesContent":["import { relations } from \"drizzle-orm\";\nimport { pgTable, uuid, varchar } from \"drizzle-orm/pg-core\";\n\nimport { timestamps, uuidId } from \"../schema-helpers\";\nimport { JobInfoTable } from \"./job-info\";\n\nexport const InterviewsTable = pgTable(\"interviews\", {\n  ...uuidId,\n  jobInfoId: uuid(\"job_info_id\")\n    .notNull()\n    .references(() => JobInfoTable.id, { onDelete: \"cascade\" }),\n  duration: varchar(\"duration\", { length: 255 }).notNull(),\n  humeChatId: varchar(\"hume_chat_id\", { length: 255 }).notNull(),\n  feedback: varchar(\"feedback\", { length: 2000 }),\n  ...timestamps,\n});\n\nexport const interviewRelations = relations(InterviewsTable, ({ one }) => ({\n  jobInfo: one(JobInfoTable, {\n    fields: [InterviewsTable.jobInfoId],\n    references: [JobInfoTable.id],\n  }),\n}));\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAAA;AAEA;AACA;;;;;AAEO,MAAM,kBAAkB,IAAA,kKAAO,EAAC,cAAc;IACnD,GAAG,+IAAM;IACT,WAAW,IAAA,yKAAI,EAAC,eACb,OAAO,GACP,UAAU,CAAC,IAAM,yJAAY,CAAC,EAAE,EAAE;QAAE,UAAU;IAAU;IAC3D,UAAU,IAAA,+KAAO,EAAC,YAAY;QAAE,QAAQ;IAAI,GAAG,OAAO;IACtD,YAAY,IAAA,+KAAO,EAAC,gBAAgB;QAAE,QAAQ;IAAI,GAAG,OAAO;IAC5D,UAAU,IAAA,+KAAO,EAAC,YAAY;QAAE,QAAQ;IAAK;IAC7C,GAAG,mJAAU;AACf;AAEO,MAAM,qBAAqB,IAAA,0JAAS,EAAC,iBAAiB,CAAC,EAAE,GAAG,EAAE,GAAK,CAAC;QACzE,SAAS,IAAI,yJAAY,EAAE;YACzB,QAAQ;gBAAC,gBAAgB,SAAS;aAAC;YACnC,YAAY;gBAAC,yJAAY,CAAC,EAAE;aAAC;QAC/B;IACF,CAAC","debugId":null}},
    {"offset": {"line": 163, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/drizzle/schema/questions.ts"],"sourcesContent":["import { pgEnum, pgTable, uuid, varchar } from \"drizzle-orm/pg-core\";\nimport { relations } from \"drizzle-orm\";\n\nimport { timestamps, uuidId } from \"../schema-helpers\";\nimport { JobInfoTable } from \"./job-info\";\n\nexport const questionDifficultyOptions = [\n  \"easy\",\n  \"medium\",\n  \"hard\",\n] as const;\n\nexport const questionDifficultyEnum = pgEnum(\n  \"question_difficulty\",\n  questionDifficultyOptions\n);\n\nexport const QuestionsTable = pgTable(\"questions\", {\n  ...uuidId,\n  jobInfoId: uuid(\"job_info_id\")\n    .notNull()\n    .references(() => JobInfoTable.id, { onDelete: \"cascade\" }),\n  text: varchar(\"text\", { length: 2000 }).notNull(),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  difficulty: questionDifficultyEnum(\"difficulty\").notNull(),\n  ...timestamps,\n});\nexport const questionsRelations = relations(QuestionsTable, ({ one }) => ({\n  JobInfo: one(JobInfoTable, {\n    fields: [QuestionsTable.jobInfoId],\n    references: [JobInfoTable.id],\n  }),\n}));"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;;;;;AAEO,MAAM,4BAA4B;IACvC;IACA;IACA;CACD;AAEM,MAAM,yBAAyB,IAAA,2KAAM,EAC1C,uBACA;AAGK,MAAM,iBAAiB,IAAA,kKAAO,EAAC,aAAa;IACjD,GAAG,+IAAM;IACT,WAAW,IAAA,yKAAI,EAAC,eACb,OAAO,GACP,UAAU,CAAC,IAAM,yJAAY,CAAC,EAAE,EAAE;QAAE,UAAU;IAAU;IAC3D,MAAM,IAAA,+KAAO,EAAC,QAAQ;QAAE,QAAQ;IAAK,GAAG,OAAO;IAC/C,MAAM,IAAA,+KAAO,EAAC,QAAQ;QAAE,QAAQ;IAAI,GAAG,OAAO;IAC9C,YAAY,uBAAuB,cAAc,OAAO;IACxD,GAAG,mJAAU;AACf;AACO,MAAM,qBAAqB,IAAA,0JAAS,EAAC,gBAAgB,CAAC,EAAE,GAAG,EAAE,GAAK,CAAC;QACxE,SAAS,IAAI,yJAAY,EAAE;YACzB,QAAQ;gBAAC,eAAe,SAAS;aAAC;YAClC,YAAY;gBAAC,yJAAY,CAAC,EAAE;aAAC;QAC/B;IACF,CAAC","debugId":null}},
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/drizzle/schema/job-info.ts"],"sourcesContent":["import { relations } from \"drizzle-orm\";\n\nimport { pgEnum, pgTable, varchar } from \"drizzle-orm/pg-core\";\n\nimport { timestamps, uuidId } from \"../schema-helpers\";\nimport { UserTable } from \"./user\";\nimport { InterviewsTable } from \"./interviews\";\nimport { QuestionsTable } from \"./questions\";\n\nexport const experienceLevelOptions = [\n  \"junior\",\n  \"mid-level\",\n  \"senior\",\n] as const;\n\nexport const experienceLevelEnum = pgEnum(\n  \"experience_level\",\n  experienceLevelOptions\n);\n\nexport const JobInfoTable = pgTable(\"job_infos\", {\n  ...uuidId,\n  userId: varchar(\"user_id\", { length: 255 })\n    .notNull()\n    .references(() => UserTable.id, { onDelete: \"cascade\" }),\n  title: varchar(\"title\", { length: 255 }).notNull(),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n   description: varchar().notNull(),\n  experienceLevel: experienceLevelEnum(\"experience_level\").notNull(),\n  ...timestamps,\n});\n\nexport const jobInfoRelations = relations(JobInfoTable, ({ one, many }) => ({\n  user: one(UserTable, {\n    fields: [JobInfoTable.userId],\n    references: [UserTable.id],\n  }),\n  questions:many(QuestionsTable),\n  interviews: many(InterviewsTable),\n}));\n"],"names":[],"mappings":";;;;;;AAAA;AAEA;AAAA;AAAA;AAEA;AACA;AACA;AACA;;;;;;;AAEO,MAAM,yBAAyB;IACpC;IACA;IACA;CACD;AAEM,MAAM,sBAAsB,IAAA,2KAAM,EACvC,oBACA;AAGK,MAAM,eAAe,IAAA,kKAAO,EAAC,aAAa;IAC/C,GAAG,+IAAM;IACT,QAAQ,IAAA,+KAAO,EAAC,WAAW;QAAE,QAAQ;IAAI,GACtC,OAAO,GACP,UAAU,CAAC,IAAM,+IAAS,CAAC,EAAE,EAAE;QAAE,UAAU;IAAU;IACxD,OAAO,IAAA,+KAAO,EAAC,SAAS;QAAE,QAAQ;IAAI,GAAG,OAAO;IAChD,MAAM,IAAA,+KAAO,EAAC,QAAQ;QAAE,QAAQ;IAAI,GAAG,OAAO;IAC7C,aAAa,IAAA,+KAAO,IAAG,OAAO;IAC/B,iBAAiB,oBAAoB,oBAAoB,OAAO;IAChE,GAAG,mJAAU;AACf;AAEO,MAAM,mBAAmB,IAAA,0JAAS,EAAC,cAAc,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,GAAK,CAAC;QAC1E,MAAM,IAAI,+IAAS,EAAE;YACnB,QAAQ;gBAAC,aAAa,MAAM;aAAC;YAC7B,YAAY;gBAAC,+IAAS,CAAC,EAAE;aAAC;QAC5B;QACA,WAAU,KAAK,yJAAc;QAC7B,YAAY,KAAK,2JAAe;IAClC,CAAC","debugId":null}},
    {"offset": {"line": 273, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/drizzle/schema/user.ts"],"sourcesContent":["import { relations } from \"drizzle-orm\";\nimport { pgTable, varchar } from \"drizzle-orm/pg-core\";\n\nimport { timestamps } from \"../schema-helpers\";\nimport { JobInfoTable } from \"./job-info\";\n\nexport const UserTable = pgTable(\"users\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey(),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  imageUrl: varchar(\"image_url\", { length: 2048 }).notNull(),\n  email: varchar(\"email\", { length: 255 }).notNull().unique(),\n  ...timestamps,\n});\n\nexport const userRelations = relations(UserTable, ({ many }) => ({\n  jobInfos: many(JobInfoTable),\n}));\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAEA;AACA;;;;;AAEO,MAAM,YAAY,IAAA,kKAAO,EAAC,SAAS;IACxC,IAAI,IAAA,+KAAO,EAAC,MAAM;QAAE,QAAQ;IAAI,GAAG,UAAU;IAC7C,MAAM,IAAA,+KAAO,EAAC,QAAQ;QAAE,QAAQ;IAAI,GAAG,OAAO;IAC9C,UAAU,IAAA,+KAAO,EAAC,aAAa;QAAE,QAAQ;IAAK,GAAG,OAAO;IACxD,OAAO,IAAA,+KAAO,EAAC,SAAS;QAAE,QAAQ;IAAI,GAAG,OAAO,GAAG,MAAM;IACzD,GAAG,mJAAU;AACf;AAEO,MAAM,gBAAgB,IAAA,0JAAS,EAAC,WAAW,CAAC,EAAE,IAAI,EAAE,GAAK,CAAC;QAC/D,UAAU,KAAK,yJAAY;IAC7B,CAAC","debugId":null}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/drizzle/schema.ts"],"sourcesContent":["export * from \"./schema/user\";\nexport * from \"./schema/job-info\";\nexport * from \"./schema/questions\";\nexport * from \"./schema/interviews\";\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA","debugId":null}},
    {"offset": {"line": 376, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/drizzle/db.ts"],"sourcesContent":["import { drizzle } from \"drizzle-orm/node-postgres\";\nimport { Pool } from \"pg\";\n\nimport { serverEnv } from \"@/data/env/server\";\nimport * as schema from \"./schema\";\n\nconst pool = new Pool({\n  connectionString: serverEnv.DATABSE_URL,\n});\n\nexport const db = drizzle(pool, { schema });\n"],"names":[],"mappings":";;;AAAA;AACA;AAEA;AACA;AAAA;;;;;;;;;;AAEA,MAAM,OAAO,IAAI,4GAAI,CAAC;IACpB,kBAAkB,2IAAS,CAAC,WAAW;AACzC;AAEO,MAAM,KAAK,IAAA,yKAAO,EAAC,MAAM;IAAE,QAAA;AAAO","debugId":null}},
    {"offset": {"line": 404, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/lib/dataCache.ts"],"sourcesContent":["type CacheTag = \"users\" | \"jobInfos\" | \"interviews\" | \"questions\"\n\nexport function getGlobalTag(tag: CacheTag) {\n  return `global:${tag}` as const\n}\n\nexport function getUserTag(tag: CacheTag, userId: string) {\n  return `user:${userId}:${tag}` as const\n}\n\nexport function getJobInfoTag(tag: CacheTag, jobInfoId: string) {\n  return `jobInfo:${jobInfoId}:${tag}` as const\n}\n\nexport function getIdTag(tag: CacheTag, id: string) {\n  return `id:${id}:${tag}` as const\n}"],"names":[],"mappings":";;;;;;AAEO,SAAS,aAAa,GAAa;IACxC,OAAO,CAAC,OAAO,EAAE,KAAK;AACxB;AAEO,SAAS,WAAW,GAAa,EAAE,MAAc;IACtD,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,EAAE,KAAK;AAChC;AAEO,SAAS,cAAc,GAAa,EAAE,SAAiB;IAC5D,OAAO,CAAC,QAAQ,EAAE,UAAU,CAAC,EAAE,KAAK;AACtC;AAEO,SAAS,SAAS,GAAa,EAAE,EAAU;IAChD,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,KAAK;AAC1B","debugId":null}},
    {"offset": {"line": 426, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/features/interviews/dbCache.ts"],"sourcesContent":["import { getGlobalTag, getIdTag, getJobInfoTag } from \"@/lib/dataCache\"\nimport { revalidateTag } from \"next/cache\"\n\nexport function getInterviewGlobalTag() {\n  return getGlobalTag(\"interviews\")\n}\n\nexport function getInterviewJobInfoTag(jobInfoId: string) {\n  return getJobInfoTag(\"interviews\", jobInfoId)\n}\n\nexport function getInterviewIdTag(id: string) {\n  return getIdTag(\"interviews\", id)\n}\n\nexport function revalidateInterviewCache({\n  id,\n  jobInfoId,\n}: {\n  id: string\n  jobInfoId: string\n}) {\n  revalidateTag(getInterviewGlobalTag())\n  revalidateTag(getInterviewJobInfoTag(jobInfoId))\n  revalidateTag(getInterviewIdTag(id))\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,SAAS;IACd,OAAO,IAAA,yIAAY,EAAC;AACtB;AAEO,SAAS,uBAAuB,SAAiB;IACtD,OAAO,IAAA,0IAAa,EAAC,cAAc;AACrC;AAEO,SAAS,kBAAkB,EAAU;IAC1C,OAAO,IAAA,qIAAQ,EAAC,cAAc;AAChC;AAEO,SAAS,yBAAyB,EACvC,EAAE,EACF,SAAS,EAIV;IACC,IAAA,gJAAa,EAAC;IACd,IAAA,gJAAa,EAAC,uBAAuB;IACrC,IAAA,gJAAa,EAAC,kBAAkB;AAClC","debugId":null}},
    {"offset": {"line": 456, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/features/interviews/db.ts"],"sourcesContent":["import { db } from \"@/drizzle/db\"\nimport { InterviewsTable } from \"@/drizzle/schema\"\nimport { revalidateInterviewCache } from \"./dbCache\"\nimport { eq } from \"drizzle-orm\"\n\nexport async function insertInterview(\n  interview: typeof InterviewsTable.$inferInsert\n) {\n  const [newInterview] = await db\n    .insert(InterviewsTable)\n    .values(interview)\n    .returning({ id: InterviewsTable.id, jobInfoId: InterviewsTable.jobInfoId })\n\n  revalidateInterviewCache(newInterview)\n\n  return newInterview\n}\n\nexport async function updateInterview(\n  id: string,\n  interview: Partial<typeof InterviewsTable.$inferInsert>\n) {\n  const [newInterview] = await db\n    .update(InterviewsTable)\n    .set(interview)\n    .where(eq(InterviewsTable.id, id))\n    .returning({ id: InterviewsTable.id, jobInfoId: InterviewsTable.jobInfoId })\n\n  revalidateInterviewCache(newInterview)\n\n  return newInterview\n}"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AACA;AACA;;;;;;;;;AAEO,eAAe,gBACpB,SAA8C;IAE9C,MAAM,CAAC,aAAa,GAAG,MAAM,4HAAE,CAC5B,MAAM,CAAC,2JAAe,EACtB,MAAM,CAAC,WACP,SAAS,CAAC;QAAE,IAAI,2JAAe,CAAC,EAAE;QAAE,WAAW,2JAAe,CAAC,SAAS;IAAC;IAE5E,IAAA,sKAAwB,EAAC;IAEzB,OAAO;AACT;AAEO,eAAe,gBACpB,EAAU,EACV,SAAuD;IAEvD,MAAM,CAAC,aAAa,GAAG,MAAM,4HAAE,CAC5B,MAAM,CAAC,2JAAe,EACtB,GAAG,CAAC,WACJ,KAAK,CAAC,IAAA,0KAAE,EAAC,2JAAe,CAAC,EAAE,EAAE,KAC7B,SAAS,CAAC;QAAE,IAAI,2JAAe,CAAC,EAAE;QAAE,WAAW,2JAAe,CAAC,SAAS;IAAC;IAE5E,IAAA,sKAAwB,EAAC;IAEzB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 630, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/services/hume/lib/api.ts"],"sourcesContent":["import { serverEnv} from \"@/data/env/server\"\nimport { HumeClient } from \"hume\"\nimport { ReturnChatEvent } from \"hume/api/resources/empathicVoice\"\n\nexport async function fetchChatMessages(humeChatId: string) {\n  \"use cache\"\n\n  const client = new HumeClient({ apiKey: serverEnv.HUME_API_KEY })\n  const allChatEvents: ReturnChatEvent[] = []\n  const chatEventsIterator = await client.empathicVoice.chats.listChatEvents(\n    humeChatId,\n    { pageNumber: 0, pageSize: 100 }\n  )\n\n  for await (const chatEvent of chatEventsIterator) {\n    allChatEvents.push(chatEvent)\n  }\n\n  return allChatEvents\n}\n\n\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;IAGO,+SAAA,eAAe,kBAAkB,UAAkB;IAGxD,MAAM,SAAS,IAAI,6IAAU,CAAC;QAAE,QAAQ,2IAAS,CAAC,YAAY;IAAC;IAC/D,MAAM,gBAAmC,EAAE;IAC3C,MAAM,qBAAqB,MAAM,OAAO,aAAa,CAAC,KAAK,CAAC,cAAc,CACxE,YACA;QAAE,YAAY;QAAG,UAAU;IAAI;IAGjC,WAAW,MAAM,aAAa,mBAAoB;QAChD,cAAc,IAAI,CAAC;IACrB;IAEA,OAAO;AACT;;;;;;IAfsB","debugId":null}},
    {"offset": {"line": 666, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/services/ai/models/google.ts"],"sourcesContent":["import { serverEnv} from \"@/data/env/server\"\nimport { createGoogleGenerativeAI } from \"@ai-sdk/google\"\n\nexport const google = createGoogleGenerativeAI({\n  apiKey: serverEnv.GEMINI_API_KEY,\n})"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,MAAM,SAAS,IAAA,qLAAwB,EAAC;IAC7C,QAAQ,2IAAS,CAAC,cAAc;AAClC","debugId":null}},
    {"offset": {"line": 680, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/services/ai/interviews.ts"],"sourcesContent":["import { JobInfoTable } from \"@/drizzle/schema\"\nimport { fetchChatMessages } from \"../hume/lib/api\"\nimport { generateText } from \"ai\"\nimport { google } from \"./models/google\"\n\nexport async function generateAiInterviewFeedback({\n  humeChatId,\n  jobInfo,\n  userName,\n}: {\n  humeChatId: string\n  jobInfo: Pick<\n    typeof JobInfoTable.$inferSelect,\n    \"title\" | \"description\" | \"experienceLevel\"\n  >\n  userName: string\n}) {\n  const messages = await fetchChatMessages(humeChatId)\n\n  const formattedMessages = messages\n    .map(message => {\n      if (message.type !== \"USER_MESSAGE\" && message.type !== \"AGENT_MESSAGE\") {\n        return null\n      }\n      if (message.messageText == null) return null\n\n      return {\n        speaker:\n          message.type === \"USER_MESSAGE\" ? \"interviewee\" : \"interviewer\",\n        text: message.messageText,\n        emotionFeatures:\n          message.role === \"USER\" ? message.emotionFeatures : undefined,\n      }\n    })\n    .filter(f => f != null)\n\n  const { text } = await generateText({\n    model: google(\"gemini-2.5-flash\"),\n    prompt: JSON.stringify(formattedMessages),\n    maxSteps: 10,\n    experimental_continueSteps: true,\n    system: `You are an expert interview coach and evaluator. Your role is to analyze a mock job interview transcript and provide clear, detailed, and structured feedback on the interviewee's performance based on the job requirements. Your output should be in markdown format.\n  \n---\n\nAdditional Context:\n\nInterviewee's name: ${userName}\nJob title: ${jobInfo.title}\nJob description: ${jobInfo.description}\nJob Experience level: ${jobInfo.experienceLevel}\n\n---\n\nTranscript JSON Format:\n\nspeaker: \"interviewee\" or \"interviewer\"\ntext: \"The actual spoken text of the message\"\nemotionFeatures: \"An object of emotional features where the key is the emotion and the value is the intensity (0-1). This is only provided for interviewee messages.\"\n\n---\n\nYour Task:\n\nReview the full transcript and evaluate the interviewee's performance in relation to the role. Provide detailed, structured feedback organized into the following primary categories (do not repeat the subcategories in your response and instead just use them as reference for what to look for and include in your response):\n\n---\n\nFeedback Categories:\n\n1. **Communication Clarity**\n   - Was the interviewee articulate and easy to understand?\n   - Did they use structured and appropriate language for this job and experience level?\n\n2. **Confidence and Emotional State**\n   - Based on the provided emotional cues and speech content, how confident did the interviewee appear?\n   - Highlight any nervous or hesitant moments that may have affected the impression they gave.\n\n3. **Response Quality**\n   - Did the interviewee respond with relevant, well-reasoned answers aligned with the job requirements?\n   - Were answers appropriately scoped for their experience level (e.g., detail depth, use of examples)?\n\n4. **Pacing and Timing**\n   - Analyze delays between interviewer questions and interviewee responses.\n   - Point out long or unnatural pauses that may indicate uncertainty or unpreparedness.\n\n5. **Engagement and Interaction**\n   - Did the interviewee show curiosity or ask thoughtful questions?\n   - Did they engage with the conversation in a way that reflects interest in the role and company?\n\n6. **Role Fit & Alignment**\n   - Based on the job description and the candidate's answers, how well does the interviewee match the expectations for this role and level?\n   - Identify any gaps in technical or soft skills.\n\n7. **Overall Strengths & Areas for Improvement**\n   - Summarize top strengths.\n   - Identify the most important areas for improvement.\n   - Provide a brief overall performance assessment.\n\n---\n\nAdditional Notes:\n\n- Reference specific moments from the transcript, including quotes and timestamps where useful. Do not return specific emotional features in your response.\n- Tailor your analysis and feedback to the specific job description and experience level provided.\n- Be clear, constructive, and actionable. The goal is to help the interviewee grow.\n- Do not include an h1 title or information about the job description in your response, just include the feedback.\n- Refer to the interviewee as \"you\" in your feedback. This feedback should be written as if you were speaking directly to the interviewee.\n- Include a number rating (out of 10) in the heading for each category (e.g., \"Communication Clarity: 8/10\") as well as an overall rating at the very start of the response.\n- Stop generating output as soon you have provided the full feedback.`,\n  })\n\n  return text\n}"],"names":[],"mappings":";;;AACA;AACA;AACA;;;;AAEO,eAAe,4BAA4B,EAChD,UAAU,EACV,OAAO,EACP,QAAQ,EAQT;IACC,MAAM,WAAW,MAAM,IAAA,4JAAiB,EAAC;IAEzC,MAAM,oBAAoB,SACvB,GAAG,CAAC,CAAA;QACH,IAAI,QAAQ,IAAI,KAAK,kBAAkB,QAAQ,IAAI,KAAK,iBAAiB;YACvE,OAAO;QACT;QACA,IAAI,QAAQ,WAAW,IAAI,MAAM,OAAO;QAExC,OAAO;YACL,SACE,QAAQ,IAAI,KAAK,iBAAiB,gBAAgB;YACpD,MAAM,QAAQ,WAAW;YACzB,iBACE,QAAQ,IAAI,KAAK,SAAS,QAAQ,eAAe,GAAG;QACxD;IACF,GACC,MAAM,CAAC,CAAA,IAAK,KAAK;IAEpB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAA,sKAAY,EAAC;QAClC,OAAO,IAAA,qJAAM,EAAC;QACd,QAAQ,KAAK,SAAS,CAAC;QACvB,UAAU;QACV,4BAA4B;QAC5B,QAAQ,CAAC;;;;;;oBAMO,EAAE,SAAS;WACpB,EAAE,QAAQ,KAAK,CAAC;iBACV,EAAE,QAAQ,WAAW,CAAC;sBACjB,EAAE,QAAQ,eAAe,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qEA2DqB,CAAC;IACpE;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 783, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/features/users/dbCache.ts"],"sourcesContent":["import { getGlobalTag, getIdTag } from \"../../lib/dataCache\"\nimport { revalidateTag } from \"next/cache\"\n\nexport function getUserGlobalTag() {\n  return getGlobalTag(\"users\")\n}\n\nexport function getUserIdTag(id: string) {\n  return getIdTag(\"users\", id)\n}\n\nexport function revalidateUserCache(id: string) {\n  revalidateTag(getUserGlobalTag())\n  revalidateTag(getUserIdTag(id))\n}"],"names":[],"mappings":";;;;;AAAA;AACA;;;AAEO,SAAS;IACd,OAAO,IAAA,yIAAY,EAAC;AACtB;AAEO,SAAS,aAAa,EAAU;IACrC,OAAO,IAAA,qIAAQ,EAAC,SAAS;AAC3B;AAEO,SAAS,oBAAoB,EAAU;IAC5C,IAAA,gJAAa,EAAC;IACd,IAAA,gJAAa,EAAC,aAAa;AAC7B","debugId":null}},
    {"offset": {"line": 824, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/services/lib/getcurrentUser.ts"],"sourcesContent":["import { db } from \"@/drizzle/db\"\nimport { UserTable } from \"@/drizzle/schema\"\nimport { getUserIdTag } from \"@/features/users/dbCache\"\nimport { auth } from \"@clerk/nextjs/server\"\nimport { eq } from \"drizzle-orm\"\nimport { cacheTag } from \"next/dist/server/use-cache/cache-tag\"\n\nexport async function getCurrentUser({ allData = false } = {}) {\n  const { userId, redirectToSignIn } = await auth()\n\n  return {\n    userId,\n    redirectToSignIn,\n    user: allData && userId != null ? await getUser(userId) : undefined,\n  }\n}\n\nasync function getUser(id: string) {\n  \"use cache\"\n  cacheTag(getUserIdTag(id))\n\n  return db.query.UserTable.findFirst({\n    where: eq(UserTable.id, id),\n  })\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AAEO,eAAe,eAAe,EAAE,UAAU,KAAK,EAAE,GAAG,CAAC,CAAC;IAC3D,MAAM,EAAE,MAAM,EAAE,gBAAgB,EAAE,GAAG,MAAM,IAAA,6LAAI;IAE/C,OAAO;QACL;QACA;QACA,MAAM,WAAW,UAAU,OAAO,MAAM,QAAQ,UAAU;IAC5D;AACF;IAEA,+SAAA,eAAe,QAAQ,EAAU;IAE/B,IAAA,oLAAQ,EAAC,IAAA,qJAAY,EAAC;IAEtB,OAAO,4HAAE,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC;QAClC,OAAO,IAAA,0KAAE,EAAC,+IAAS,CAAC,EAAE,EAAE;IAC1B;AACF;;;;;;IAPe","debugId":null}},
    {"offset": {"line": 876, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/app/api/interviews/%5BinterviewId%5D/feedback/route.ts"],"sourcesContent":["import { db } from \"@/drizzle/db\"\nimport { InterviewsTable } from \"@/drizzle/schema\"\nimport { updateInterview } from \"@/features/interviews/db\"\nimport { generateAiInterviewFeedback } from \"@/services/ai/interviews\"\nimport { getCurrentUser } from \"@/services/lib/getcurrentUser\"\nimport { eq } from \"drizzle-orm\"\nimport { NextResponse } from \"next/server\"\n\nexport async function POST(\n  _request: Request,\n  { params }: { params: { interviewId: string } }\n) {\n  const { userId, user } = await getCurrentUser({ allData: true })\n  if (userId == null || user == null) {\n    return NextResponse.json(\n      { error: true, message: \"You don't have permission to do this\" },\n      { status: 401 }\n    )\n  }\n\n  const interview = await db.query.InterviewsTable.findFirst({\n    where: eq(InterviewsTable.id, params.interviewId),\n    with: {\n      jobInfo: {\n        columns: {\n          userId: true,\n          title: true,\n          description: true,\n          experienceLevel: true,\n        },\n      },\n    },\n  })\n\n  if (interview == null || interview.jobInfo.userId !== userId) {\n    return NextResponse.json(\n      { error: true, message: \"You don't have permission to do this\" },\n      { status: 403 }\n    )\n  }\n\n  if (!interview.humeChatId) {\n    return NextResponse.json(\n      { error: true, message: \"Interview has not been completed yet\" },\n      { status: 400 }\n    )\n  }\n\n  const feedback = await generateAiInterviewFeedback({\n    humeChatId: interview.humeChatId,\n    jobInfo: interview.jobInfo,\n    userName: user.name,\n  })\n\n  if (!feedback) {\n    return NextResponse.json(\n      { error: true, message: \"Failed to generate feedback\" },\n      { status: 500 }\n    )\n  }\n\n  await updateInterview(interview.id, { feedback })\n\n  return NextResponse.json({ error: false, feedback })\n}\n"],"names":[],"mappings":";;;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AAEO,eAAe,KACpB,QAAiB,EACjB,EAAE,MAAM,EAAuC;IAE/C,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAA,4JAAc,EAAC;QAAE,SAAS;IAAK;IAC9D,IAAI,UAAU,QAAQ,QAAQ,MAAM;QAClC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAAM,SAAS;QAAuC,GAC/D;YAAE,QAAQ;QAAI;IAElB;IAEA,MAAM,YAAY,MAAM,4HAAE,CAAC,KAAK,CAAC,eAAe,CAAC,SAAS,CAAC;QACzD,OAAO,IAAA,0KAAE,EAAC,2JAAe,CAAC,EAAE,EAAE,OAAO,WAAW;QAChD,MAAM;YACJ,SAAS;gBACP,SAAS;oBACP,QAAQ;oBACR,OAAO;oBACP,aAAa;oBACb,iBAAiB;gBACnB;YACF;QACF;IACF;IAEA,IAAI,aAAa,QAAQ,UAAU,OAAO,CAAC,MAAM,KAAK,QAAQ;QAC5D,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAAM,SAAS;QAAuC,GAC/D;YAAE,QAAQ;QAAI;IAElB;IAEA,IAAI,CAAC,UAAU,UAAU,EAAE;QACzB,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAAM,SAAS;QAAuC,GAC/D;YAAE,QAAQ;QAAI;IAElB;IAEA,MAAM,WAAW,MAAM,IAAA,oKAA2B,EAAC;QACjD,YAAY,UAAU,UAAU;QAChC,SAAS,UAAU,OAAO;QAC1B,UAAU,KAAK,IAAI;IACrB;IAEA,IAAI,CAAC,UAAU;QACb,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAAM,SAAS;QAA8B,GACtD;YAAE,QAAQ;QAAI;IAElB;IAEA,MAAM,IAAA,wJAAe,EAAC,UAAU,EAAE,EAAE;QAAE;IAAS;IAE/C,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,OAAO;QAAO;IAAS;AACpD","debugId":null}}]
}