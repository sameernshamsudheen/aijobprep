{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn(\n        \"rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n);\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\"text-2xl font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n));\nCardTitle.displayName = \"CardTitle\";\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-slate-500\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\";\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n));\nCardContent.displayName = \"CardContent\";\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n));\nCardFooter.displayName = \"CardFooter\";\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n};\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAC3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,wEACA;QAED,GAAG,KAAK;;;;;;AAIf,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,sDAAsD;QACnE,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,0BAA0B;QACvC,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-slate-900 text-slate-50 hover:bg-slate-900/90\",\n        destructive:\n          \"bg-red-500 text-slate-50 hover:bg-red-500/90\",\n        outline:\n          \"border border-slate-200 bg-white hover:bg-slate-100 hover:text-slate-900\",\n        secondary: \"bg-slate-100 text-slate-900 hover:bg-slate-100/80\",\n        ghost: \"hover:bg-slate-100 hover:text-slate-900\",\n        link: \"text-slate-900 underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,0UACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WAAW;YACX,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,mNAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/components/BackLInk.tsx"],"sourcesContent":["\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"./ui/button\"\nimport Link from \"next/link\"\nimport { ArrowLeftIcon } from \"lucide-react\"\n\nexport function BackLink({\n  href,\n  children,\n  className,\n}: {\n  href: string\n  children: React.ReactNode\n  className?: string\n}) {\n  return (\n    <Button\n      asChild\n      variant=\"ghost\"\n      size=\"sm\"\n      className={cn(\"-ml-3\", className)}\n    >\n      <Link\n        href={href}\n        className=\"flex gap-2 items-center text-sm text-muted-foreground\"\n      >\n        <ArrowLeftIcon />\n        {children}\n      </Link>\n    </Button>\n  )\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;;;;;;AAEO,SAAS,SAAS,EACvB,IAAI,EACJ,QAAQ,EACR,SAAS,EAKV;IACC,qBACE,8OAAC,4IAAM;QACL,OAAO;QACP,SAAQ;QACR,MAAK;QACL,WAAW,IAAA,yHAAE,EAAC,SAAS;kBAEvB,cAAA,8OAAC,uKAAI;YACH,MAAM;YACN,WAAU;;8BAEV,8OAAC,qOAAa;;;;;gBACb;;;;;;;;;;;;AAIT","debugId":null}},
    {"offset": {"line": 201, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/features/jobinfos/dbCache.ts"],"sourcesContent":["import { getGlobalTag, getIdTag, getUserTag } from \"@/lib/dataCache\"\nimport { revalidateTag } from \"next/cache\"\n\nexport function getJobInfoGlobalTag() {\n  return getGlobalTag(\"jobInfos\")\n}\n\nexport function getJobInfoUserTag(userId: string) {\n  return getUserTag(\"jobInfos\", userId)\n}\n\nexport function getJobInfoIdTag(id: string) {\n  return getIdTag(\"jobInfos\", id)\n}\n\nexport function revalidateJobInfoCache({\n  id,\n  userId,\n}: {\n  id: string\n  userId: string\n}) {\n  revalidateTag(getJobInfoGlobalTag())\n  revalidateTag(getJobInfoUserTag(userId))\n  revalidateTag(getJobInfoIdTag(id))\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,SAAS;IACd,OAAO,IAAA,uIAAY,EAAC;AACtB;AAEO,SAAS,kBAAkB,MAAc;IAC9C,OAAO,IAAA,qIAAU,EAAC,YAAY;AAChC;AAEO,SAAS,gBAAgB,EAAU;IACxC,OAAO,IAAA,mIAAQ,EAAC,YAAY;AAC9B;AAEO,SAAS,uBAAuB,EACrC,EAAE,EACF,MAAM,EAIP;IACC,IAAA,8IAAa,EAAC;IACd,IAAA,8IAAa,EAAC,kBAAkB;IAChC,IAAA,8IAAa,EAAC,gBAAgB;AAChC","debugId":null}},
    {"offset": {"line": 231, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/features/jobinfos/components/JobinfoBackLink.tsx"],"sourcesContent":["\nimport { BackLink } from \"@/components/BackLInk\"\nimport { db } from \"@/drizzle/db\"\nimport { JobInfoTable } from \"@/drizzle/schema\"\nimport { cn } from \"@/lib/utils\"\nimport { eq } from \"drizzle-orm\"\nimport { cacheTag } from \"next/dist/server/use-cache/cache-tag\"\nimport { Suspense } from \"react\"\nimport { getJobInfoIdTag } from \"../dbCache\"\n\nexport function JobInfoBackLink({\n  jobInfoId,\n  className,\n}: {\n  jobInfoId: string\n  className?: string\n}) {\n  return (\n    <BackLink\n      href={`/app/job-infos/${jobInfoId}`}\n      className={cn(\"mb-4\", className)}\n    >\n      <Suspense fallback=\"Job Description\">\n        <JobName jobInfoId={jobInfoId} />\n      </Suspense>\n    </BackLink>\n  )\n}\n\nasync function JobName({ jobInfoId }: { jobInfoId: string }) {\n  const jobInfo = await getJobInfo(jobInfoId)\n  return jobInfo?.name ?? \"Job Description\"\n}\n\nasync function getJobInfo(id: string) {\n  \"use cache\"\n  cacheTag(getJobInfoIdTag(id))\n\n  return db.query.JobInfoTable.findFirst({\n    where: eq(JobInfoTable.id, id),\n  })\n}\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AAEO,SAAS,gBAAgB,EAC9B,SAAS,EACT,SAAS,EAIV;IACC,qBACE,8OAAC,0IAAQ;QACP,MAAM,CAAC,eAAe,EAAE,WAAW;QACnC,WAAW,IAAA,yHAAE,EAAC,QAAQ;kBAEtB,cAAA,8OAAC,iNAAQ;YAAC,UAAS;sBACjB,cAAA,8OAAC;gBAAQ,WAAW;;;;;;;;;;;;;;;;AAI5B;AAEA,eAAe,QAAQ,EAAE,SAAS,EAAyB;IACzD,MAAM,UAAU,MAAM,WAAW;IACjC,OAAO,SAAS,QAAQ;AAC1B;IAEA,6SAAA,eAAe,WAAW,EAAU;IAElC,IAAA,kLAAQ,EAAC,IAAA,yJAAe,EAAC;IAEzB,OAAO,0HAAE,CAAC,KAAK,CAAC,YAAY,CAAC,SAAS,CAAC;QACrC,OAAO,IAAA,wKAAE,EAAC,uJAAY,CAAC,EAAE,EAAE;IAC7B;AACF;;;;;;IAPe","debugId":null}},
    {"offset": {"line": 307, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/features/jobinfos/components/JobInfoForm.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const JobInfoForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call JobInfoForm() from the server but JobInfoForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/features/jobinfos/components/JobInfoForm.tsx <module evaluation>\",\n    \"JobInfoForm\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;AACvE;;AACO,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,kFACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 320, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/features/jobinfos/components/JobInfoForm.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const JobInfoForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call JobInfoForm() from the server but JobInfoForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/features/jobinfos/components/JobInfoForm.tsx\",\n    \"JobInfoForm\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;AACvE;;AACO,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,8DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 333, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 343, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/app/app/job-infos/%5BjobInfoId%5D/edit/page.tsx"],"sourcesContent":["import { BackLink } from \"@/components/BackLInk\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { db } from \"@/drizzle/db\"\nimport { JobInfoTable } from \"@/drizzle/schema\"\nimport { JobInfoBackLink } from \"@/features/jobinfos/components/JobinfoBackLink\"\nimport { JobInfoForm } from \"@/features/jobinfos/components/JobInfoForm\"\nimport { getJobInfoIdTag } from \"@/features/jobinfos/dbCache\"\nimport { getCurrentUser } from \"@/services/lib/getcurrentUser\"\nimport { and, eq } from \"drizzle-orm\"\nimport { Loader2 } from \"lucide-react\"\nimport { cacheTag } from \"next/dist/server/use-cache/cache-tag\"\nimport { notFound } from \"next/navigation\"\nimport { Suspense } from \"react\"\n\nexport default async function JobInfoNewPage({\n  params,\n}: {\n  params: Promise<{ jobInfoId: string }>\n}) {\n  const { jobInfoId } = await params\n\n  return (\n    <div className=\"container my-4 max-w-5xl space-y-4\">\n      <JobInfoBackLink jobInfoId={jobInfoId} />\n\n      <h1 className=\"text-3xl md:text-4xl\">Edit Job Description</h1>\n\n      <Card>\n        <CardContent>\n          <Suspense\n            fallback={<Loader2 className=\"size-24 animate-spin mx-auto\" />}\n          >\n            <SuspendedForm jobInfoId={jobInfoId} />\n          </Suspense>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n\nasync function SuspendedForm({ jobInfoId }: { jobInfoId: string }) {\n  const { userId, redirectToSignIn } = await getCurrentUser()\n  if (userId == null) return redirectToSignIn()\n\n  const jobInfo = await getJobInfo(jobInfoId, userId)\n  if (jobInfo == null) return notFound()\n\n  return <JobInfoForm jobInfo={jobInfo} />\n}\n\nasync function getJobInfo(id: string, userId: string) {\n  \"use cache\"\n  cacheTag(getJobInfoIdTag(id))\n\n  return db.query.JobInfoTable.findFirst({\n    where: and(eq(JobInfoTable.id, id), eq(JobInfoTable.userId, userId)),\n  })\n}"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;AAEe,eAAe,eAAe,EAC3C,MAAM,EAGP;IACC,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM;IAE5B,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,gLAAe;gBAAC,WAAW;;;;;;0BAE5B,8OAAC;gBAAG,WAAU;0BAAuB;;;;;;0BAErC,8OAAC,wIAAI;0BACH,cAAA,8OAAC,+IAAW;8BACV,cAAA,8OAAC,iNAAQ;wBACP,wBAAU,8OAAC,4NAAO;4BAAC,WAAU;;;;;;kCAE7B,cAAA,8OAAC;4BAAc,WAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AAEA,eAAe,cAAc,EAAE,SAAS,EAAyB;IAC/D,MAAM,EAAE,MAAM,EAAE,gBAAgB,EAAE,GAAG,MAAM,IAAA,0JAAc;IACzD,IAAI,UAAU,MAAM,OAAO;IAE3B,MAAM,UAAU,MAAM,WAAW,WAAW;IAC5C,IAAI,WAAW,MAAM,OAAO,IAAA,iMAAQ;IAEpC,qBAAO,8OAAC,wKAAW;QAAC,SAAS;;;;;;AAC/B;IAEA,6SAAA,eAAe,WAAW,EAAU,EAAE,MAAc;IAElD,IAAA,kLAAQ,EAAC,IAAA,yJAAe,EAAC;IAEzB,OAAO,0HAAE,CAAC,KAAK,CAAC,YAAY,CAAC,SAAS,CAAC;QACrC,OAAO,IAAA,yKAAG,EAAC,IAAA,wKAAE,EAAC,uJAAY,CAAC,EAAE,EAAE,KAAK,IAAA,wKAAE,EAAC,uJAAY,CAAC,MAAM,EAAE;IAC9D;AACF;;;;;;IAPe","debugId":null}},
    {"offset": {"line": 474, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/features/jobinfos/schema.ts"],"sourcesContent":["import { experienceLevelOptions } from \"@/drizzle/schema\"\nimport z from \"zod\"\n\nexport const jobInfoSchema = z.object({\n  name: z.string().min(1, \"Required\"),\n  title: z.string().min(1).nullable(),\n  experienceLevel: z.enum(experienceLevelOptions),\n  description: z.string().min(1, \"Required\"),\n})\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;;;AAEO,MAAM,gBAAgB,uJAAC,CAAC,MAAM,CAAC;IACpC,MAAM,uJAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACxB,OAAO,uJAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,QAAQ;IACjC,iBAAiB,uJAAC,CAAC,IAAI,CAAC,iKAAsB;IAC9C,aAAa,uJAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AACjC","debugId":null}},
    {"offset": {"line": 494, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/features/jobinfos/db.ts"],"sourcesContent":["import { db } from \"@/drizzle/db\"\nimport { JobInfoTable } from \"@/drizzle/schema\"\nimport { revalidateJobInfoCache } from \"./dbCache\"\nimport { eq } from \"drizzle-orm\"\n\nexport async function insertJobInfo(jobInfo: typeof JobInfoTable.$inferInsert) {\n  const [newJobInfo] = await db.insert(JobInfoTable).values(jobInfo).returning({\n    id: JobInfoTable.id,\n    userId: JobInfoTable.userId,\n  })\n\n  revalidateJobInfoCache(newJobInfo)\n\n  return newJobInfo\n}\n\nexport async function updateJobInfo(\n  id: string,\n  jobInfo: Partial<typeof JobInfoTable.$inferInsert>\n) {\n  const [updatedJobInfo] = await db\n    .update(JobInfoTable)\n    .set(jobInfo)\n    .where(eq(JobInfoTable.id, id))\n    .returning({\n      id: JobInfoTable.id,\n      userId: JobInfoTable.userId,\n    })\n\n  revalidateJobInfoCache(updatedJobInfo)\n\n  return updatedJobInfo\n}"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AACA;AACA;;;;;;;;;AAEO,eAAe,cAAc,OAAyC;IAC3E,MAAM,CAAC,WAAW,GAAG,MAAM,0HAAE,CAAC,MAAM,CAAC,uJAAY,EAAE,MAAM,CAAC,SAAS,SAAS,CAAC;QAC3E,IAAI,uJAAY,CAAC,EAAE;QACnB,QAAQ,uJAAY,CAAC,MAAM;IAC7B;IAEA,IAAA,gKAAsB,EAAC;IAEvB,OAAO;AACT;AAEO,eAAe,cACpB,EAAU,EACV,OAAkD;IAElD,MAAM,CAAC,eAAe,GAAG,MAAM,0HAAE,CAC9B,MAAM,CAAC,uJAAY,EACnB,GAAG,CAAC,SACJ,KAAK,CAAC,IAAA,wKAAE,EAAC,uJAAY,CAAC,EAAE,EAAE,KAC1B,SAAS,CAAC;QACT,IAAI,uJAAY,CAAC,EAAE;QACnB,QAAQ,uJAAY,CAAC,MAAM;IAC7B;IAEF,IAAA,gKAAsB,EAAC;IAEvB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 534, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/features/jobinfos/action.ts"],"sourcesContent":["\"use server\"\n\nimport z from \"zod\"\nimport { jobInfoSchema } from \"../jobinfos/schema\"\nimport { experienceLevelOptions } from \"@/drizzle/schema\"\nimport { getCurrentUser } from \"@/services/lib/getcurrentUser\"\nimport { insertJobInfo, updateJobInfo as updateJobInfoDb } from \"./db\"\nimport { redirect } from \"next/navigation\"\nimport { db } from \"@/drizzle/db\"\nimport { and, eq } from \"drizzle-orm\"\nimport { JobInfoTable } from \"@/drizzle/schema\"\nimport { cacheTag } from \"next/dist/server/use-cache/cache-tag\"\nimport { getJobInfoIdTag } from \"./dbCache\"\n\nexport async function createJobInfo(unsafeData: z.infer<typeof jobInfoSchema>) {\n  const { userId } = await getCurrentUser()\n  if (userId == null) {\n    return {\n      error: true,\n      message: \"You don't have permission to do this\",\n    }\n  }\n\n  const { success, data } = jobInfoSchema.safeParse(unsafeData)\n  if (!success) {\n    return {\n      error: true,\n      message: \"Invalid job data\",\n    }\n  }\n\n  // Derive the literal union type for experience level from the schema options\n  type ExperienceLevel = (typeof experienceLevelOptions)[number]\n\n  // Normalize nullable fields so DB insert matches non-null columns\n  const insertPayload = {\n    ...data,\n    title: data.title ?? \"\",\n    // safe to cast here because options are the single source of truth\n    experienceLevel: data.experienceLevel as ExperienceLevel,\n    userId,\n  }\n\n  const jobInfo = await insertJobInfo(insertPayload)\n\n  redirect(`/app/job-infos/${jobInfo.id}`)\n}\n\nexport async function updateJobInfo(\n  id: string,\n  unsafeData: z.infer<typeof jobInfoSchema>\n) {\n  const { userId } = await getCurrentUser()\n  if (userId == null) {\n    return {\n      error: true,\n      message: \"You don't have permission to do this\",\n    }\n  }\n\n  const { success, data } = jobInfoSchema.safeParse(unsafeData)\n  if (!success) {\n    return {\n      error: true,\n      message: \"Invalid job data\",\n    }\n  }\n\n  const existingJobInfo = await getJobInfo(id, userId)\n  if (existingJobInfo == null) {\n    return {\n      error: true,\n      message: \"You don't have permission to do this\",\n    }\n  }\n\n  type ExperienceLevel = (typeof experienceLevelOptions)[number]\n\n  // Normalize nullable fields so DB update matches non-null columns\n  const updatePayload = {\n    ...data,\n    title: data.title ?? \"\",\n    experienceLevel: data.experienceLevel as ExperienceLevel,\n  }\n\n  const jobInfo = await updateJobInfoDb(id, updatePayload)\n\n  redirect(`/app/job-infos/${jobInfo.id}`)\n}\n\nasync function getJobInfo(id: string, userId: string) {\n  \"use cache\"\n  cacheTag(getJobInfoIdTag(id))\n\n  return db.query.JobInfoTable.findFirst({\n    where: and(eq(JobInfoTable.id, id), eq(JobInfoTable.userId, userId)),\n  })\n}"],"names":[],"mappings":";;;;;;;AAGA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;;;;;;;;;;;;;;;;AAEO,eAAe,cAAc,UAAyC;IAC3E,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAA,0JAAc;IACvC,IAAI,UAAU,MAAM;QAClB,OAAO;YACL,OAAO;YACP,SAAS;QACX;IACF;IAEA,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,sJAAa,CAAC,SAAS,CAAC;IAClD,IAAI,CAAC,SAAS;QACZ,OAAO;YACL,OAAO;YACP,SAAS;QACX;IACF;IAKA,kEAAkE;IAClE,MAAM,gBAAgB;QACpB,GAAG,IAAI;QACP,OAAO,KAAK,KAAK,IAAI;QACrB,mEAAmE;QACnE,iBAAiB,KAAK,eAAe;QACrC;IACF;IAEA,MAAM,UAAU,MAAM,IAAA,kJAAa,EAAC;IAEpC,IAAA,iMAAQ,EAAC,CAAC,eAAe,EAAE,QAAQ,EAAE,EAAE;AACzC;AAEO,eAAe,cACpB,EAAU,EACV,UAAyC;IAEzC,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAA,0JAAc;IACvC,IAAI,UAAU,MAAM;QAClB,OAAO;YACL,OAAO;YACP,SAAS;QACX;IACF;IAEA,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,sJAAa,CAAC,SAAS,CAAC;IAClD,IAAI,CAAC,SAAS;QACZ,OAAO;YACL,OAAO;YACP,SAAS;QACX;IACF;IAEA,MAAM,kBAAkB,MAAM,WAAW,IAAI;IAC7C,IAAI,mBAAmB,MAAM;QAC3B,OAAO;YACL,OAAO;YACP,SAAS;QACX;IACF;IAIA,kEAAkE;IAClE,MAAM,gBAAgB;QACpB,GAAG,IAAI;QACP,OAAO,KAAK,KAAK,IAAI;QACrB,iBAAiB,KAAK,eAAe;IACvC;IAEA,MAAM,UAAU,MAAM,IAAA,kJAAe,EAAC,IAAI;IAE1C,IAAA,iMAAQ,EAAC,CAAC,eAAe,EAAE,QAAQ,EAAE,EAAE;AACzC;IAEA,6SAAA,eAAe,WAAW,EAAU,EAAE,MAAc;IAElD,IAAA,kLAAQ,EAAC,IAAA,yJAAe,EAAC;IAEzB,OAAO,0HAAE,CAAC,KAAK,CAAC,YAAY,CAAC,SAAS,CAAC;QACrC,OAAO,IAAA,yKAAG,EAAC,IAAA,wKAAE,EAAC,uJAAY,CAAC,EAAE,EAAE,KAAK,IAAA,wKAAE,EAAC,uJAAY,CAAC,MAAM,EAAE;IAC9D;AACF;;;;;;IAPe;;;IA5EO;IAkCA;;AAlCA,+OAAA;AAkCA,+OAAA","debugId":null}}]
}