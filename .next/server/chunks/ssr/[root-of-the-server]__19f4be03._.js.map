{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/features/jobinfos/dbCache.ts"],"sourcesContent":["import { getGlobalTag, getIdTag, getUserTag } from \"@/lib/dataCache\"\nimport { revalidateTag } from \"next/cache\"\n\nexport function getJobInfoGlobalTag() {\n  return getGlobalTag(\"jobInfos\")\n}\n\nexport function getJobInfoUserTag(userId: string) {\n  return getUserTag(\"jobInfos\", userId)\n}\n\nexport function getJobInfoIdTag(id: string) {\n  return getIdTag(\"jobInfos\", id)\n}\n\nexport function revalidateJobInfoCache({\n  id,\n  userId,\n}: {\n  id: string\n  userId: string\n}) {\n  revalidateTag(getJobInfoGlobalTag())\n  revalidateTag(getJobInfoUserTag(userId))\n  revalidateTag(getJobInfoIdTag(id))\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,SAAS;IACd,OAAO,IAAA,uIAAY,EAAC;AACtB;AAEO,SAAS,kBAAkB,MAAc;IAC9C,OAAO,IAAA,qIAAU,EAAC,YAAY;AAChC;AAEO,SAAS,gBAAgB,EAAU;IACxC,OAAO,IAAA,mIAAQ,EAAC,YAAY;AAC9B;AAEO,SAAS,uBAAuB,EACrC,EAAE,EACF,MAAM,EAIP;IACC,IAAA,8IAAa,EAAC;IACd,IAAA,8IAAa,EAAC,kBAAkB;IAChC,IAAA,8IAAa,EAAC,gBAAgB;AAChC","debugId":null}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///Users/sameershamsudheen/aijobprep/src/app/app/job-infos/%5BjobInfoId%5D/interviews/new/page.tsx"],"sourcesContent":["import { db } from \"@/drizzle/db\"\nimport { JobInfoTable } from \"@/drizzle/schema\"\nimport { getJobInfoIdTag } from \"@/features/jobinfos/dbCache\"\nimport { getCurrentUser } from \"@/services/lib/getcurrentUser\"\nimport { and, eq } from \"drizzle-orm\"\nimport { Loader2Icon } from \"lucide-react\"\nimport { cacheTag } from \"next/dist/server/use-cache/cache-tag\"\nimport { notFound, redirect } from \"next/navigation\"\nimport { Suspense } from \"react\"\nimport { fetchAccessToken } from \"hume\"\n\nimport { VoiceProvider } from \"@humeai/voice-react\"\nimport { StartCall } from \"../new/StartCall\"\n// import { canCreateInterview } from \"@/features/interviews/permissions\"\nimport { serverEnv } from \"@/data/env/server\"\n\n\nexport default async function NewInterviewPage({\n  params,\n}: {\n  params: Promise<{ jobInfoId: string }>\n}) {\n  const { jobInfoId } = await params\n  return (\n    <Suspense\n      fallback={\n        <div className=\"h-screen-header flex items-center justify-center\">\n          <Loader2Icon className=\"animate-spin size-24\" />\n        </div>\n      }\n    >\n      <SuspendedComponent jobInfoId={jobInfoId} />\n    </Suspense>\n  )\n}\n\nasync function SuspendedComponent({ jobInfoId }: { jobInfoId: string }) {\n  const { userId, redirectToSignIn, user } = await getCurrentUser({\n    allData: true,\n  })\n  if (userId == null || user == null) return redirectToSignIn()\n\n//   if (!(await canCreateInterview())) return redirect(\"/app/upgrade\")\n\n  const jobInfo = await getJobInfo(jobInfoId, userId)\n  if (jobInfo == null) return notFound()\n\n  const accessToken = await fetchAccessToken({\n    apiKey: serverEnv.HUME_API_KEY,\n    secretKey: serverEnv.HUME_SECRET_KEY,\n  })\n\n  return (\n    <VoiceProvider>\n      <StartCall jobInfo={jobInfo} user={user} accessToken={accessToken} />\n    </VoiceProvider>\n  )\n}\n\nasync function getJobInfo(id: string, userId: string) {\n  \"use cache\"\n  cacheTag(getJobInfoIdTag(id))\n\n  return db.query.JobInfoTable.findFirst({\n    where: and(eq(JobInfoTable.id, id), eq(JobInfoTable.userId, userId)),\n  })\n}"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;;;;;;AAEA,yEAAyE;AACzE;;;;;;;;;;;;;;;;;;;;;;AAGe,eAAe,iBAAiB,EAC7C,MAAM,EAGP;IACC,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM;IAC5B,qBACE,8OAAC,iNAAQ;QACP,wBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,oOAAW;gBAAC,WAAU;;;;;;;;;;;kBAI3B,cAAA,8OAAC;YAAmB,WAAW;;;;;;;;;;;AAGrC;AAEA,eAAe,mBAAmB,EAAE,SAAS,EAAyB;IACpE,MAAM,EAAE,MAAM,EAAE,gBAAgB,EAAE,IAAI,EAAE,GAAG,MAAM,IAAA,0JAAc,EAAC;QAC9D,SAAS;IACX;IACA,IAAI,UAAU,QAAQ,QAAQ,MAAM,OAAO;IAE7C,uEAAuE;IAErE,MAAM,UAAU,MAAM,WAAW,WAAW;IAC5C,IAAI,WAAW,MAAM,OAAO,IAAA,iMAAQ;IAEpC,MAAM,cAAc,MAAM,IAAA,iJAAgB,EAAC;QACzC,QAAQ,yIAAS,CAAC,YAAY;QAC9B,WAAW,yIAAS,CAAC,eAAe;IACtC;IAEA,qBACE,8OAAC,6KAAa;kBACZ,cAAA,8OAAC;YAAU,SAAS;YAAS,MAAM;YAAM,aAAa;;;;;;;;;;;AAG5D;IAEA,6SAAA,eAAe,WAAW,EAAU,EAAE,MAAc;IAElD,IAAA,kLAAQ,EAAC,IAAA,yJAAe,EAAC;IAEzB,OAAO,0HAAE,CAAC,KAAK,CAAC,YAAY,CAAC,SAAS,CAAC;QACrC,OAAO,IAAA,yKAAG,EAAC,IAAA,wKAAE,EAAC,uJAAY,CAAC,EAAE,EAAE,KAAK,IAAA,wKAAE,EAAC,uJAAY,CAAC,MAAM,EAAE;IAC9D;AACF;;;;;;IAPe","debugId":null}}]
}