{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import arcjet, { detectBot, shield, slidingWindow } from \"@arcjet/next\";\nimport { clerkMiddleware, createRouteMatcher } from \"@clerk/nextjs/server\";\n\nconst isPublicRoute = createRouteMatcher([\"/sign-in(.*)\", \"/\"]);\n\nconst aj = arcjet({\n  key: process.env.ARCJET_KEY ?? \"\",\n  rules: [\n    shield({ mode: \"LIVE\" }),\n    detectBot({\n      mode: \"LIVE\",\n      allow: [\"CATEGORY:SEARCH_ENGINE\", \"CATEGORY:MONITOR\", \"CATEGORY:PREVIEW\"],\n    }),\n    slidingWindow({\n      mode: \"LIVE\",\n      interval: \"1m\",\n      max: 100,\n    }),\n  ],\n});\n\nexport default clerkMiddleware(async (auth, req) => {\n  if (process.env.ARCJET_KEY) {\n    const decision = await aj.protect(req);\n    if (decision.isDenied()) {\n      return new Response(\"Forbidden\", { status: 403 });\n    }\n  }\n\n  if (!isPublicRoute(req)) {\n    await auth.protect();\n  }\n});\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    \"/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)\",\n    // Always run for API routes\n    \"/(api|trpc)(.*)\",\n  ],\n};\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AACA;AAAA;;;;;;;;;AAEA,MAAM,gBAAgB,IAAA,wMAAkB,EAAC;IAAC;IAAgB;CAAI;AAE9D,MAAM,KAAK,IAAA,4KAAM,EAAC;IAChB,KAAK,QAAQ,GAAG,CAAC,UAAU,IAAI;IAC/B,OAAO;QACL,IAAA,iKAAM,EAAC;YAAE,MAAM;QAAO;QACtB,IAAA,oKAAS,EAAC;YACR,MAAM;YACN,OAAO;gBAAC;gBAA0B;gBAAoB;aAAmB;QAC3E;QACA,IAAA,wKAAa,EAAC;YACZ,MAAM;YACN,UAAU;YACV,KAAK;QACP;KACD;AACH;uCAEe,IAAA,wMAAe,EAAC,OAAO,MAAM;IAC1C,IAAI,QAAQ,GAAG,CAAC,UAAU,EAAE;QAC1B,MAAM,WAAW,MAAM,GAAG,OAAO,CAAC;QAClC,IAAI,SAAS,QAAQ,IAAI;YACvB,OAAO,IAAI,SAAS,aAAa;gBAAE,QAAQ;YAAI;QACjD;IACF;IAEA,IAAI,CAAC,cAAc,MAAM;QACvB,MAAM,KAAK,OAAO;IACpB;AACF;AAEO,MAAM,SAAS;IACpB,SAAS;QACP,6EAA6E;QAC7E;QACA,4BAA4B;QAC5B;KACD;AACH"}}]
}